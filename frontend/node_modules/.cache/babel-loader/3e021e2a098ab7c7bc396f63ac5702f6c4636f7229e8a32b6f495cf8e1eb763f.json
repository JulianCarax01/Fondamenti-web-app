{"ast":null,"code":"import _slicedToArray from\"/home/mamba/WebstormProjects/app/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useState}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function AddFriend(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),friendToAdd=_useState2[0],setFriendToAdd=_useState2[1];var user=JSON.parse(localStorage.getItem('user'));var me_user=user._id;//ottengo l'id dell'utente attualmente loggato \nvar handleAddFriend=function handleAddFriend(event){event.preventDefault();if(friendToAdd===user.username){alert(\"Non puoi aggiungere te stesso come amico.\");return;}axios.post('http://localhost:3000/api/users/addFriend',{user:me_user,friend:friendToAdd}).then(function(response){console.log(response.data);alert(\"L'amico Ã¨ stato aggiunto!\");setFriendToAdd('');//effettuo la richiesta post per l'aggiunta di un amico passando come corpo della richiesta l'amico da aggiungere e l'id dell'utente attualmente loggato \n}).catch(function(error){//gestisco i diversi errori\nif(error.response&&error.response.status===401){alert(\"Utente non trovato\");}else if(error.response&&error.response.status===400){alert(\"Utente giÃ  presente nella lista di amici\");}else{console.error(error);}});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\" In questa pagina puoi aggiungere un amico \\uD83D\\uDE4B\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddFriend,children:[/*#__PURE__*/_jsx(\"label\",{children:\" Aggiungi un amico  \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"friendadd\",placeholder:\"Digita lo username dell'amico\",value:friendToAdd,onChange:function onChange(event){setFriendToAdd(event.target.value);event.target.value='';}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Aggiungi\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\" Per ritornare alla \",/*#__PURE__*/_jsx(\"a\",{href:\"http://localhost:3001/homepage\",style:{color:\"#6643b5\"},children:\" Homepage \"}),\" \"]})]});}","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","AddFriend","_useState","_useState2","_slicedToArray","friendToAdd","setFriendToAdd","user","JSON","parse","localStorage","getItem","me_user","_id","handleAddFriend","event","preventDefault","username","alert","post","friend","then","response","console","log","data","catch","error","status","children","onSubmit","type","name","placeholder","value","onChange","target","href","style","color"],"sources":["/home/mamba/WebstormProjects/app/frontend/src/pages/AddFriend.jsx"],"sourcesContent":["import React from \"react\"\nimport { useState } from \"react\"\nimport axios from \"axios\"\n\nexport default function AddFriend() {\n    const [friendToAdd, setFriendToAdd] = useState('')\n\n    const user = JSON.parse(localStorage.getItem('user'))\n    const me_user = user._id //ottengo l'id dell'utente attualmente loggato \n    \n    const handleAddFriend = (event) => {\n        event.preventDefault()\n\n        if (friendToAdd === user.username) {\n            alert(\"Non puoi aggiungere te stesso come amico.\");\n            return;\n        }\n\n        axios.post('http://localhost:3000/api/users/addFriend', {user: me_user, friend: friendToAdd})\n      .then((response) => {\n        console.log(response.data)\n        alert(\"L'amico Ã¨ stato aggiunto!\")\n        setFriendToAdd('') //effettuo la richiesta post per l'aggiunta di un amico passando come corpo della richiesta l'amico da aggiungere e l'id dell'utente attualmente loggato \n      })\n      .catch((error) => { //gestisco i diversi errori\n        if (error.response && error.response.status === 401) {\n          alert(\"Utente non trovato\")\n        } \n        else if (error.response && error.response.status === 400) {\n          alert(\"Utente giÃ  presente nella lista di amici\")\n        } \n        else {\n          console.error(error)\n        }\n      })\n  };\n  return(\n        <div> \n            <h2> In questa pagina puoi aggiungere un amico ðŸ™‹</h2>\n            \n            <form onSubmit={handleAddFriend}>\n            <label> Aggiungi un amico  </label>\n            <input type=\"text\" name=\"friendadd\" placeholder=\"Digita lo username dell'amico\" value={friendToAdd} \n            onChange={(event) => \n              {setFriendToAdd(event.target.value); event.target.value=''} } />\n            <button type=\"submit\">Aggiungi</button>\n            </form>\n            <p> Per ritornare alla <a href=\"http://localhost:3001/homepage\" style={{ color: \"#6643b5\" }}> Homepage </a> </p>\n\n\n\n        </div>\n  );\n}\n"],"mappings":"+HAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,OAAO,CAChC,MAAO,CAAAC,KAAK,KAAM,OAAO,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEzB,cAAe,SAAS,CAAAC,SAASA,CAAA,CAAG,CAChC,IAAAC,SAAA,CAAsCP,QAAQ,CAAC,EAAE,CAAC,CAAAQ,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA3CG,WAAW,CAAAF,UAAA,IAAEG,cAAc,CAAAH,UAAA,IAElC,GAAM,CAAAI,IAAI,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CACrD,GAAM,CAAAC,OAAO,CAAGL,IAAI,CAACM,GAAG,CAAC;AAEzB,GAAM,CAAAC,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAIC,KAAK,CAAK,CAC/BA,KAAK,CAACC,cAAc,CAAC,CAAC,CAEtB,GAAIX,WAAW,GAAKE,IAAI,CAACU,QAAQ,CAAE,CAC/BC,KAAK,CAAC,2CAA2C,CAAC,CAClD,OACJ,CAEAtB,KAAK,CAACuB,IAAI,CAAC,2CAA2C,CAAE,CAACZ,IAAI,CAAEK,OAAO,CAAEQ,MAAM,CAAEf,WAAW,CAAC,CAAC,CAC9FgB,IAAI,CAAC,SAACC,QAAQ,CAAK,CAClBC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAACG,IAAI,CAAC,CAC1BP,KAAK,CAAC,2BAA2B,CAAC,CAClCZ,cAAc,CAAC,EAAE,CAAC,CAAC;AACrB,CAAC,CAAC,CACDoB,KAAK,CAAC,SAACC,KAAK,CAAK,CAAE;AAClB,GAAIA,KAAK,CAACL,QAAQ,EAAIK,KAAK,CAACL,QAAQ,CAACM,MAAM,GAAK,GAAG,CAAE,CACnDV,KAAK,CAAC,oBAAoB,CAAC,CAC7B,CAAC,IACI,IAAIS,KAAK,CAACL,QAAQ,EAAIK,KAAK,CAACL,QAAQ,CAACM,MAAM,GAAK,GAAG,CAAE,CACxDV,KAAK,CAAC,0CAA0C,CAAC,CACnD,CAAC,IACI,CACHK,OAAO,CAACI,KAAK,CAACA,KAAK,CAAC,CACtB,CACF,CAAC,CAAC,CACN,CAAC,CACD,mBACM3B,KAAA,QAAA6B,QAAA,eACI/B,IAAA,OAAA+B,QAAA,CAAI,yDAA6C,CAAI,CAAC,cAEtD7B,KAAA,SAAM8B,QAAQ,CAAEhB,eAAgB,CAAAe,QAAA,eAChC/B,IAAA,UAAA+B,QAAA,CAAO,sBAAoB,CAAO,CAAC,cACnC/B,IAAA,UAAOiC,IAAI,CAAC,MAAM,CAACC,IAAI,CAAC,WAAW,CAACC,WAAW,CAAC,+BAA+B,CAACC,KAAK,CAAE7B,WAAY,CACnG8B,QAAQ,CAAE,SAAAA,SAACpB,KAAK,CACd,CAACT,cAAc,CAACS,KAAK,CAACqB,MAAM,CAACF,KAAK,CAAC,CAAEnB,KAAK,CAACqB,MAAM,CAACF,KAAK,CAAC,EAAE,EAAG,CAAE,CAAC,cAClEpC,IAAA,WAAQiC,IAAI,CAAC,QAAQ,CAAAF,QAAA,CAAC,UAAQ,CAAQ,CAAC,EACjC,CAAC,cACP7B,KAAA,MAAA6B,QAAA,EAAG,sBAAoB,cAAA/B,IAAA,MAAGuC,IAAI,CAAC,gCAAgC,CAACC,KAAK,CAAE,CAAEC,KAAK,CAAE,SAAU,CAAE,CAAAV,QAAA,CAAC,YAAU,CAAG,CAAC,IAAC,EAAG,CAAC,EAI/G,CAAC,CAEd"},"metadata":{},"sourceType":"module","externalDependencies":[]}