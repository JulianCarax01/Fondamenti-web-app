{"ast":null,"code":"import _slicedToArray from\"/home/mamba/WebstormProjects/app/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import axios from'axios';import{useNavigate}from\"react-router-dom\";import'../style/style_login.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function LogIn(){var navigate=useNavigate();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];function togglePasswordVisibility(){var passwordInput=document.getElementById(\"password\");var toggleBtn=document.querySelector(\".toggle-btn\");if(passwordInput.type===\"password\"){passwordInput.type=\"text\";toggleBtn.innerHTML=\"&#x1f576;\";// Change the button icon to hide\n}else{passwordInput.type=\"password\";toggleBtn.innerHTML=\"&#x1f441;\";// Change the button icon to show\n}}var handleSubmit=function handleSubmit(e){e.preventDefault();// Salva l'username nel localStorage\n//localStorage.setItem('username', username);\naxios.post('http://localhost:3000/api/users/login',{username:username,password:password}).then(function(response){var _data$user;var data=response.data;console.log(data);var user=(_data$user=data.user)!==null&&_data$user!==void 0?_data$user:null;if(user!==null){localStorage.setItem(\"user\",JSON.stringify(user));navigate('/homepage');}else{alert(\"Utente non valido o password errata\");}}).catch(function(error){if(error.response&&error.response.status===401){var errorMessage=error.response.data.error;alert(errorMessage);}else{console.error(error);alert('Errore del server');}});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sign In\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",id:\"usernameForm\",children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",name:\"username\",value:username,onChange:function onChange(e){return setUsername(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"password-toggle\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"toggle-btn\",onClick:togglePasswordVisibility,children:\"\\uD83D\\uDC41\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",id:\"btnSend\",children:\"Accedi\"})]}),/*#__PURE__*/_jsx(\"p\",{children:\" Don't have an account yet? \"}),/*#__PURE__*/_jsx(\"a\",{href:\"http://localhost:3001/signup\",children:/*#__PURE__*/_jsx(\"button\",{children:\"Sign Up!\"})})]});}","map":{"version":3,"names":["React","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LogIn","navigate","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","togglePasswordVisibility","passwordInput","document","getElementById","toggleBtn","querySelector","type","innerHTML","handleSubmit","e","preventDefault","post","then","response","_data$user","data","console","log","user","localStorage","setItem","JSON","stringify","alert","catch","error","status","errorMessage","children","onSubmit","htmlFor","id","name","value","onChange","target","className","onClick","href"],"sources":["/home/mamba/WebstormProjects/app/frontend/src/pages/Login.jsx"],"sourcesContent":["import React, {useState} from \"react\";\nimport axios from 'axios';\nimport {useNavigate} from \"react-router-dom\";\nimport '../style/style_login.css'\n\nexport default function LogIn() {\n    const navigate = useNavigate();\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n\n    function togglePasswordVisibility() {\n        let passwordInput = document.getElementById(\"password\");\n        let toggleBtn = document.querySelector(\".toggle-btn\");\n\n        if (passwordInput.type === \"password\") {\n            passwordInput.type = \"text\";\n            toggleBtn.innerHTML = \"&#x1f576;\"; // Change the button icon to hide\n        } else {\n            passwordInput.type = \"password\";\n            toggleBtn.innerHTML = \"&#x1f441;\"; // Change the button icon to show\n        }\n    }\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        // Salva l'username nel localStorage\n        //localStorage.setItem('username', username);\n\n        axios.post('http://localhost:3000/api/users/login', {username, password})\n            .then((response) => {\n                const data = response.data;\n                console.log(data)\n                const user = data.user ?? null;\n                if (user !== null) {\n                    localStorage.setItem(\"user\", JSON.stringify(user));\n                    navigate('/homepage');\n                } else {\n                    alert(\"Utente non valido o password errata\");\n                }\n            })\n            .catch((error) => {\n                if (error.response && error.response.status === 401) {\n                    const {error: errorMessage} = error.response.data;\n                    alert(errorMessage);\n                } else {\n                    console.error(error);\n                    alert('Errore del server');\n                }\n            });\n\n    }\n\n    return (<>\n        <h2>Sign In</h2>\n        <form onSubmit={handleSubmit}>\n            <div>\n                <label htmlFor=\"username\" id=\"usernameForm\">Username:</label>\n                <input type=\"text\" id=\"username\" name=\"username\" value={username}\n                       onChange={(e) => setUsername(e.target.value)}/>\n            </div>\n            <div className=\"password-toggle\">\n                <label htmlFor=\"password\">Password:</label>\n                <input type=\"password\" id=\"password\" name=\"password\" value={password}\n                       onChange={(e) => setPassword(e.target.value)}/>\n                <span className=\"toggle-btn\" onClick={togglePasswordVisibility}>&#x1f441;</span>\n            </div>\n            <button type=\"submit\" id=\"btnSend\">Accedi</button>\n        </form>\n\n        <p> Don't have an account yet? </p>\n        <a href='http://localhost:3001/signup'>\n            <button>Sign Up!</button>\n        </a>\n    </>)\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}