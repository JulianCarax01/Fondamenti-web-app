{"ast":null,"code":"import _slicedToArray from\"/home/mamba/WebstormProjects/app/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import axios from'axios';import{socket}from\"../socket\";import'../style/style_sendmessage.css';import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function SendFirstMessage(){var navigate=useNavigate();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),receiver=_useState4[0],setReceiver=_useState4[1];var user=JSON.parse(localStorage.getItem('user'));var sender=user._id;var handleSubmit=function handleSubmit(e){e.preventDefault();socket.emit(\"new-message\",{text:text,receiver:receiver,sender:sender});axios.post(\"http://localhost:3000/api/users/sendMessage\",{text:text,receiver:receiver,sender:sender}).then(function(){navigate('/homepage');}).catch(function(error){if(error.response&&error.response.status===401){var errorMessage=error.response.data.error;alert(errorMessage);}else{console.error(error);alert('Errore del server');}});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Invia il tuo messaggio \\uD83D\\uDCC4\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{id:\"usernamelabel\",children:\"Inserisci qui l'username dell'utente a cui vuoi inviare il messaggio\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",name:\"username\",placeholder:\"Username...\",value:receiver,onChange:function onChange(e){setReceiver(e.target.value);e.target.value=' ';}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{id:\"messaggiolabel\",children:\"Inserisci qui il messaggio che vuoi inviare\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"messaggio\",name:\"messaggio\",placeholder:\"Inserisci qui il tuo messaggio...\",value:text,onChange:function onChange(e){setText(e.target.value);e.target.value=' ';}})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",id:\"sendMessage\",children:\"Invia\"})}),/*#__PURE__*/_jsxs(\"p\",{children:[\" Per ritornare alla \",/*#__PURE__*/_jsx(\"a\",{href:\"http://localhost:3001/homepage\",style:{color:\"#6643b5\"},children:\" Homepage \"}),\" \"]})]})]});}","map":{"version":3,"names":["React","useState","axios","socket","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SendFirstMessage","navigate","_useState","_useState2","_slicedToArray","text","setText","_useState3","_useState4","receiver","setReceiver","user","JSON","parse","localStorage","getItem","sender","_id","handleSubmit","e","preventDefault","emit","post","then","catch","error","response","status","errorMessage","data","alert","console","children","onSubmit","id","type","name","placeholder","value","onChange","target","href","style","color"],"sources":["/home/mamba/WebstormProjects/app/frontend/src/components/SendFirstMessage.jsx"],"sourcesContent":["import React, {useState} from \"react\";\nimport axios from 'axios';\nimport {socket} from \"../socket\";\nimport '../style/style_sendmessage.css'\nimport {useNavigate} from \"react-router-dom\";\n\n\nexport default function SendFirstMessage() {\n\n    const navigate = useNavigate();\n    const [text, setText] = useState('')\n    const [receiver, setReceiver] = useState('')\n\n    const user = JSON.parse(localStorage.getItem('user'));\n    const sender = user._id;\n\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        socket.emit(\"new-message\", {text, receiver, sender})\n        axios.post(`http://localhost:3000/api/users/sendMessage`, {text, receiver, sender})\n            .then(() => {\n                navigate('/homepage');\n\n            })\n            .catch((error) => {\n                if (error.response && error.response.status === 401) {\n                    const {error: errorMessage} = error.response.data;\n                    alert(errorMessage);\n                } else {\n                    console.error(error);\n                    alert('Errore del server');\n                }\n            });\n\n    }\n\n    return (<>\n        <h2>Invia il tuo messaggio ðŸ“„</h2>\n        <form onSubmit={handleSubmit}>\n            <div>\n                <label id=\"usernamelabel\">Inserisci qui l'username dell'utente a cui vuoi inviare il messaggio</label>\n                <input type=\"text\" id=\"username\" name=\"username\" placeholder=\"Username...\" value={receiver}\n                       onChange={(e) => {\n                           setReceiver(e.target.value);\n                           e.target.value = ' '\n                       }}/></div>\n\n            <div>\n                <label id=\"messaggiolabel\">Inserisci qui il messaggio che vuoi inviare</label>\n                <input type=\"text\" id=\"messaggio\" name=\"messaggio\" placeholder=\"Inserisci qui il tuo messaggio...\"\n                       value={text}\n                       onChange={(e) => {\n                           setText(e.target.value);\n                           e.target.value = ' '\n                       }}/>\n            </div>\n\n\n            <div>\n                <button type=\"submit\" id=\"sendMessage\">Invia</button>\n            </div>\n            <p> Per ritornare alla <a href=\"http://localhost:3001/homepage\" style={{ color: \"#6643b5\" }}> Homepage </a> </p>\n\n\n        </form>\n    </>)\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}